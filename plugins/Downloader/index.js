import{intercept as b}from"@neptune";function M(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toUpperCase()}var O=window.neptune.actions,v=(e,n)=>{let o=[];for(let r in O)for(let g in window.neptune.actions[r]){let p=`${r}/${M(g)}`;e.test(p)&&o.push(b(p,t=>n(t[1],t[0])))}return()=>o.forEach(r=>r())};import{ipcMain as y}from"electron";var x=e=>e.default.default,T=e=>Function(`return import("${e}")`)();var L=T("../original.asar/app/shared/client/ClientMessageChannelEnum.js").then(x);import{BrowserWindow as U}from"electron";var u=(e,...n)=>{for(let o of U.getAllWindows())o.webContents.send(e,...n)};var w=e=>{let n=t=>{let s=(...i)=>{t(e,...i)};return s.withContext=i=>(...a)=>{t(e,i,...a)},s},o=n((...t)=>u("NEPTUNE_RENDERER_LOG","log",...t)),r=n((...t)=>u("NEPTUNE_RENDERER_LOG","warn",...t)),g=n((...t)=>u("NEPTUNE_RENDERER_LOG","error",...t)),p=n((...t)=>u("NEPTUNE_RENDERER_LOG","debug",...t));return{log:o,warn:r,err:g,debug:p}},J=w("[lib.native]");var $=w("[test.native]"),k=T("../original.asar/app/shared/AppEventEnum.js").then(x),N=()=>L,l={},R=async()=>{for(let e of Object.values(await k))e!=="playback.current.time"&&(l[e]=(n,...o)=>$.log(e,...o),y.on(e,l[e]))},P=async()=>{for(let e in l)y.removeListener(e,l[e]),delete l[e]};var W=N(),A=window.electron.ipcRenderer,f={},_=async()=>{for(let e of Object.values(await W))e!=="client.playback.playersignal"&&(f[e]=(n,...o)=>c.log(e,...o),A.on(e,f[e]))},F=async()=>{for(let e in f)A.removeListener(e,f[e]),delete f[e]};import{actions as C}from"@neptune";var h=e=>{let n=s=>{let i=(...a)=>{s(e,...a)};return i.withContext=a=>(...E)=>{s(e,a,...E)},i},o=n(console.log),r=n(console.warn),g=n(console.error),p=n(console.debug),t=(s,i,a)=>{let E=d=>{s(d),i({message:`${e} - ${d}`,category:"OTHER",severity:a})};return E.withContext=d=>{let I=s.withContext(d);return m=>{I(m),m instanceof Error&&(m=m.message),i({message:`${e}.${d} - ${m}`,category:"OTHER",severity:a})}},E};return{log:o,warn:r,err:g,debug:p,msg:{log:t(o,C.message.messageInfo,"INFO"),warn:t(r,C.message.messageWarn,"WARN"),err:t(g,C.message.messageError,"ERROR")}}},se=h("[lib]");var c=h("[test]"),j=v(/.*/,c.log);R().catch(c.err.withContext("Failed to start native IPC logging"));_().catch(c.err.withContext("Failed to start client IPC logging"));var me=()=>{j?.(),P().catch(c.err.withContext("Failed to stop native IPC logging")),F().catch(c.err.withContext("Failed to stop client IPC logging"))};export{me as onUnload,c as trace};
